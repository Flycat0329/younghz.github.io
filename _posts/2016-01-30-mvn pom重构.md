---
layout: post
title: "maven pom 使用[dependencyManagement]管理依赖"
---

# 1 当前状况
mvn中pom是用‘dependencies’元素来管理依赖。
大部分依赖全在父包的pom下，也有少部分分散在子包的pom中。

## 1.1 弊端

### 1.1.1 子模块依赖过多

由于子模块的依赖是自动继承父模块的，所以没在父模块中增加依赖，都会被子模块无条件继承，导致子模块的依赖很多都是不需要的。

### 1.1.2 依赖版本不一致

父pom和子pom都依赖了某个包，且版本不一致。还有可能出现对同一组件的依赖，但是版本却不一致的情况，如spring-core和spring-beans依赖的版本在大部分情况下都应该是版本一致的。

### 1.1.3 依赖重复

在父pom和子pom中同时定义。

# 2 升级
## 2.1 升级方式

使用[dependencyManagement]代替[dependency]元素。

## 2.2 添加依赖规范

只有在子包中用到的依赖才在子包的pom中引用。
子包引用不带版本号，同一管理依赖版本。
如：

```java
// 父pom
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>${junit.version}</version>
    <scope>test</scope>
</dependency>


// 子pom
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    </dependency></scope></version></artifactId></groupId>
</dependency>

```
